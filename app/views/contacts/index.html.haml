%h1.navtitle= t("contacts.import.title")

- form_tag invite_contacts_path, :id => "select-contacts" do
  - control_class = @fetching_contacts ? "waiting" : ""
  - control_url = @fetching_contacts ? fetch_contacts_url : ""
  .controls{:class => control_class, "data-fetch-contacts-url" => control_url, "data-error-message" => t("contacts.import.error")}
    = text_field_tag "autocomplete", t("contacts.import.filter"), :id => "search-contacts", :class => "inactive", "data-autocomplete-url" => search_contacts_url
    %ul#search-contacts-results.autocomplete-list

    .block-selection
      = link_to t("contacts.import.all"), "javascript:void(0)", :class => "all"
      = link_to t("contacts.import.none"), "javascript:void(0)", :class => "none"

  - if @fetching_contacts
    .wait-notice
      .loader
        = image_tag "ajax-loader-big.gif"
      = t("contacts.import.wait")

  #contacts-to-invite
    - @contacts.each do |contact|
      .contact
        = link_to "âœ•", "javascript:void(0)", :class => "remove"
        = hidden_field_tag "emails[]", contact.email
        - if contact.name
          .name= contact.name
        .email= contact.email

  #invitation-message
    = label_tag "message", t("contacts.import.message")
    = text_area_tag "message"

  = submit_tag t("contacts.import.invite")
